<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="UltimateWalletFinal.Views.AddCardPage"
             Title="ÐÐ¾Ð²Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð°">
    <ScrollView>
        <VerticalStackLayout Spacing="15" Padding="20">

            <!-- Ð—Ð°Ð³Ð¾Ð»Ð¾Ð²Ð¾Ðº -->
            <Label Text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²ÑƒÑŽ ÐºÐ°Ñ€Ñ‚Ñƒ" 
                   FontSize="24" 
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   TextColor="#2196F3" />

            <!-- Ð¤Ð¾Ñ€Ð¼Ð° -->
            <Frame Padding="15" CornerRadius="15"
                   BackgroundColor="#F5F5F5">
                <VerticalStackLayout Spacing="12">

                    <!-- ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ñ€Ñ‚Ñ‹ -->
                    <Label Text="ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐºÐ°Ñ€Ñ‚Ñ‹ *" FontSize="14" />
                    <Entry x:Name="cardNameEntry" 
                           Placeholder="ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€: Ð—Ð¾Ð»Ð¾Ñ‚Ð°Ñ ÐºÐ°Ñ€Ñ‚Ð° Ð¡Ð±ÐµÑ€Ð±Ð°Ð½ÐºÐ°"
                           TextChanged="OnCardNameTextChanged" />

                    <!-- ÐÐ¾Ð¼ÐµÑ€ ÐºÐ°Ñ€Ñ‚Ñ‹ -->
                    <Label Text="ÐÐ¾Ð¼ÐµÑ€ ÐºÐ°Ñ€Ñ‚Ñ‹ *" FontSize="14" Margin="0,10,0,0" />
                    <Entry x:Name="cardNumberEntry" 
                           Placeholder="XXXX XXXX XXXX XXXX"
                           Keyboard="Numeric"
                           MaxLength="19"
                           TextChanged="OnCardNumberTextChanged" />

                    <!-- CVV/CVC -->
                    <Label Text="CVV/CVC" FontSize="14" Margin="0,10,0,0" />
                    <Entry x:Name="cardCvEntry" 
                           Placeholder="XXX"
                           Keyboard="Numeric"
                           MaxLength="4"
                           IsPassword="True" />
                    <!-- ÐœÐ°Ð³Ð°Ð·Ð¸Ð½ -->
                    <Label Text="ÐœÐ°Ð³Ð°Ð·Ð¸Ð½" FontSize="14" Margin="0,10,0,0" />
                    <Picker x:Name="shopPicker"
                            Title="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½"
                            ItemDisplayBinding="{Binding ShopName}"
                            SelectedIndexChanged="OnShopSelected" />

                    <!-- ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ -->
                    <Label Text="ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ" FontSize="14" Margin="0,10,0,0" />
                    <Picker x:Name="categoryPicker"
                            Title="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ"
                            ItemDisplayBinding="{Binding CategoryName}"
                            SelectedIndexChanged="OnCategorySelected" />

                    <!-- ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ -->
                    <Label Text="ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ" FontSize="14" Margin="0,10,0,0" />
                    <Editor x:Name="cardDescriptionEditor"
                            Placeholder="Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ ÐºÐ°Ñ€Ñ‚Ðµ..."
                            AutoSize="TextChanges"
                            HeightRequest="80" />

                    <!-- URL Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ -->
                    <Label Text="Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾)" 
                           FontSize="14" 
                           Margin="0,10,0,0" />
                    <Entry x:Name="imageUrlEntry" 
                           Placeholder="https://example.com/card.png"
                           Keyboard="Url" />

                    <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ -->
                    <Button Text="ðŸ“· Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ"
                            Clicked="OnUploadImageClicked"
                            BackgroundColor="#4CAF50"
                            TextColor="White"
                            CornerRadius="10"
                            HeightRequest="40"
                            Margin="0,5,0,0" />

                    <!-- ÐŸÑ€ÐµÐ´Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ -->
                    <Frame x:Name="imagePreviewFrame"
                           IsVisible="False"
                           Padding="0"
                           CornerRadius="10"
                           BackgroundColor="LightGray"
                           HeightRequest="100"
                           HorizontalOptions="Center"
                           Margin="0,10,0,0">
                        <Image x:Name="imagePreview"
                               Aspect="AspectFill" />
                    </Frame>

                </VerticalStackLayout>
            </Frame>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ -->
            <HorizontalStackLayout Spacing="10" Margin="0,20,0,0">
                <Button Text="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñƒ"
                        x:Name="saveButton"
                        Clicked="OnSaveClicked"
                        BackgroundColor="#2196F3"
                        TextColor="White"
                        CornerRadius="10"
                        HorizontalOptions="FillAndExpand"
                        HeightRequest="50" />
                
                <Button Text="ÐžÑ‚Ð¼ÐµÐ½Ð°"
                        Clicked="OnCancelClicked"
                        BackgroundColor="#757575"
                        TextColor="White"
                        CornerRadius="10"
                        HeightRequest="50" />
            </HorizontalStackLayout>

            <!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
            <ActivityIndicator x:Name="loadingIndicator"
                               IsVisible="False"
                               IsRunning="False"
                               Color="#2196F3"
                               HorizontalOptions="Center"
                               Margin="0,10,0,0" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>