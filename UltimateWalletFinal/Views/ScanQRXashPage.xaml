<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:zxing="clr-namespace:ZXing.Net.Maui.Controls;assembly=ZXing.Net.MAUI.Controls"
             x:Class="UltimateWalletFinal.Views.ScanQRXashPage"
             Title="ScanQRXashPage">

    <Grid RowDefinitions="*, Auto">
        <zxing:CameraBarcodeReaderView
                x:Name="cameraBarcodeReaderView"
                BarcodesDetected="OnBarcodeDetected"
                IsDetecting="True"
                CameraLocation="Rear"
                IsEnabled="True"/>
        <!-- ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ -->
        <VerticalStackLayout VerticalOptions="End"
                             HorizontalOptions="Fill"
                             Spacing="15"
                             Padding="20,0,20,40">

            <!-- Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ ÑÐºÐ°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ -->
            <Frame x:Name="resultFrame"
                   IsVisible="False"
                   Padding="15"
                   CornerRadius="15"
                   BackgroundColor="#E8F5E9">
                <VerticalStackLayout Spacing="5">
                    <Label x:Name="resultLabel"
                           Text=""
                           FontSize="14"
                           TextColor="#388E3C" />
                    <Button x:Name="processButton"
                            Text="Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ñ€Ñ‚Ñƒ"
                            Clicked="OnProcessResultClicked"
                            BackgroundColor="#4CAF50"
                            TextColor="White"
                            HeightRequest="40"
                            CornerRadius="10" />
                </VerticalStackLayout>
            </Frame>

            <!-- ÐšÐ½Ð¾Ð¿ÐºÐ¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ ÐºÐ°Ð¼ÐµÑ€Ð¾Ð¹ -->
            <Grid ColumnDefinitions="*,*,*" ColumnSpacing="20">

                <!-- Ð¤Ð¾Ð½Ð°Ñ€Ð¸Ðº -->
                <Frame Grid.Column="0"
                       Padding="15"
                       CornerRadius="25"
                       BackgroundColor="#80000000">
                    <VerticalStackLayout HorizontalOptions="Center">
                        <Label Text="ðŸ”¦"
                               FontSize="20"
                               HorizontalOptions="Center" />
                        <Switch x:Name="torchToggle"
                                IsToggled="False"
                                HorizontalOptions="Center"
                                OnColor="#4CAF50" />
                    </VerticalStackLayout>
                </Frame>

                <!-- ÐšÐ½Ð¾Ð¿ÐºÐ° ÑÐºÐ°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ -->
                <Frame Grid.Column="1"
                       Padding="20"
                       CornerRadius="35"
                       BackgroundColor="#2196F3">
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnManualScanTapped" />
                    </Frame.GestureRecognizers>
                    <Label Text="ðŸ“·"
                           FontSize="30"
                           TextColor="White"
                           HorizontalOptions="Center" />
                </Frame>

                <!-- ÐŸÐµÑ€ÐµÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ ÐºÐ°Ð¼ÐµÑ€Ñ‹ -->
                <Frame Grid.Column="2"
                       Padding="15"
                       CornerRadius="25"
                       BackgroundColor="#80000000">
                    <VerticalStackLayout HorizontalOptions="Center">
                        <Label Text="ðŸ”„"
                               FontSize="20"
                               HorizontalOptions="Center" />
                        <Button Text="ÐšÐ°Ð¼ÐµÑ€Ð°"
                                Clicked="OnSwitchCameraClicked"
                                BackgroundColor="Transparent"
                                TextColor="White"
                                FontSize="12"
                                Padding="0" />
                    </VerticalStackLayout>
                </Frame>

            </Grid>

            <!-- Ð ÑƒÑ‡Ð½Ð¾Ð¹ Ð²Ð²Ð¾Ð´ -->
            <Button Text="ðŸ“ Ð’Ð²ÐµÑÑ‚Ð¸ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ"
                    Clicked="OnManualInputClicked"
                    BackgroundColor="#FF9800"
                    TextColor="White"
                    CornerRadius="10"
                    HeightRequest="45"
                    FontSize="14" />

        </VerticalStackLayout>

        <!-- Ð˜Ð½Ð´Ð¸ÐºÐ°Ñ‚Ð¾Ñ€ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ -->
        <ActivityIndicator x:Name="loadingIndicator"
                           IsVisible="False"
                           IsRunning="False"
                           Color="#2196F3"
                           HorizontalOptions="Center"
                           VerticalOptions="Center" />

    </Grid>

</ContentPage>